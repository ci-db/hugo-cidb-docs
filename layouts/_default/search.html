{{ define "scripts" }}
<script>const BASE_URL = {{- .Site.BaseURL -}};</script>
<script src="{{ "js/fuse/fuse.min.js?v=v3.2.0" | relURL }}"></script>
<script src="{{ "js/jquery/jquery.mark.min.js?v=v8.11.1" | relURL }}"></script>

{{ $opts := dict "targetPath" "search.js" "minify" true }}
{{ $js_search := resources.Get "js/app/search.js" | js.Build $opts }}
<script src="{{ $js_search.RelPermalink }}?v={{ now.Unix }}"></script>



{{ end }}
{{ define "main" }}

{{ $searchIndex := resources.Get "json/search-index.json" | resources.ExecuteAsTemplate "search-index.json" . -}}
{{ $searchIndexLink := $searchIndex.RelPermalink -}}

<section class="resume-section p-3 p-lg-5 d-flex flex-column">
  <div class="my-auto" >
    <form action="{{ "search" | absURL }}">
      <input id="search-query"   data-search-index="{{ $searchIndexLink }}"  name="s"/>
    </form>
    <div id="search-results">
     <h3>Matching pages</h3>
    </div>
  </div>
</section>
<!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style -->
<script id="search-result-template" type="text/x-js-template">
    <div id="summary-${key}">
      <h4><a href="${link}">${title}</a></h4>
      <p>${snippet}</p>
      ${ isset tags }<p>Tags: ${tags}</p>${ end }
      ${ isset categories }<p>Categories: ${categories}</p>${ end }
    </div>
</script>


{{ end }}