

{{- $root :=  partial "doc/helper/get-doc-root" . -}}
{{- $page :=  . -}}
{{- $rootBreandcrumb := $root -}}
{{ with $rootBreandcrumb.Parent }}
    {{ if eq .Type "docs" }}
        {{- $rootBreandcrumb = . -}}
    {{ end }}
{{ end }}


{{- partial "breadcrumb" (dict  "root" $rootBreandcrumb "current" . ) -}}


<div class="ci-component">
    <div id="doc-search-results" class="ci-component-section show-on-search no-print">
        <h3>Search Result:</h3>
        <div class="results"></div>
    </div>



    {{- /* Aktionbar  */ -}}
    {{- $count := 0 -}}
    {{- range $index, $element :=  where $root.Pages "Type" "doc/pdf" -}}
    {{-   $count = add $index 1 -}}
    {{- end -}}
    {{- if ne $count 0 -}}


    <div class="main-actions no-print hide-on-search ci-component-section">
        <ul class="nav justify-content-end">

            
    {{-   range where $root.Pages "Type" "doc/pdf" -}}
            <li class="nav-item"><a href="{{.Permalink}}" target="_blank">{{ if ne .Title "" }}{{ .Title }}{{ else }}Print{{ end }}</a></li>
    {{-   end -}}
        </ul>
    </div>
    {{- end -}}
    <div id="ci-page-content" class="hide-on-search ci-component-section" data-pagefind-body >
    
    {{ $page := . }}
    {{- if isset .Params "content_from" -}}            
    {{- $page := .Site.GetPage .Params.content_from -}}
    {{- end -}}
    <h1>{{ $page.Title }}</h1>
    {{- if ne $page ".Description" "" -}}
    <p class="content-description">{{ $page.Description }}</p>
    {{ end }}
    {{- $page.Content -}}  
    </div>


    <div class="ci-component-section hide-on-search d-flex justify-content-center mb-3">
        <div class="p-2">
            {{ if .NextInSection  }}
            <a class="link-reverse" href="{{ .NextInSection.Permalink }}">< {{ .NextInSection.Title | truncate 50 "..." }}</a>
            {{ end }}        
        </div>
        <div class="p-2"></div>
        <div class="p-2">
            {{ if .PrevInSection }}
            <a class="link-reverse" href="{{ .PrevInSection.Permalink }}">{{ .PrevInSection.Title | truncate 50 "..." }} ></a>
            {{ end }}        
        </div>
    </div>
</div>


{{- define "scripts" -}}

{{ $opts := dict "targetPath" "doc.js" "minify" true }}
{{ $js_doc := resources.Get "js/app/doc.js" | js.Build $opts }}

<style>
    /*
    body, html {
        overflow: hidden;
        margin: 0;        
    }
  
    #content {
        height:100vh;
        overflow-y: auto; 
        padding-bottom: 180px;
    }
    */
      
</style>
<script src="{{ $js_doc.RelPermalink }}?v={{ now.Unix }}"></script>
<script>


    /*
              $( document ).ready(function() {
                  $(window).on('popstate', function() {
                          loadContent(location.pathname);
                  });
  
                  function loadContent(url) {
                          $('#main').load(url + ' #main');
                  }
  
                  $( ".ajax-call" ).click(function(event) {
                          var This = this;
                          var url = $(this).attr('href');
                          event.preventDefault();
                          $( "#content" ).load( url + ' #content', function(data, ret) {
                             if (ret == 'success') {                 
                                  $(".side-menu .ajax-call").removeClass( "active" );
                                  $(This).addClass( "active" );
  
                                  history.pushState({}, "", url);
  
                             }
                          });
  
  
                    
                        //  console.log($(this).attr('href'));
                        //  $("#content").load($(this).attr('href') + ' #content');
                          
                         // console.log("etst");
                    });
              });
  */
          </script>



{{- end -}}
