{{- $root :=  partial "doc/helper/get-doc-root" . -}}
<div class="ci-menu hide-on-search ci-component-section mt-2">
    <nav class="nav flex-column">
        {{- template "builder" (dict "site" .Site  "currentPage" . "root"  $root   "stufe" 1  "item" $root  )  -}}
    </nav>    
</div>
{{ define "builder" }}

{{- $currentPage := .currentPage -}}   
{{- $stufe := .stufe -}}
{{- $root := .root -}}
{{- $site := .site -}}

{{ range $index, $element := where   .item.Pages.ByWeight "Type" "doc"  }}    
    {{- $title := .Title -}}
    {{- if eq  $title "" }} 
        {{ $title = "{{ NO TITLE }}" }}
    {{ end -}}
    <a class="nav-link ajax-call{{ if eq .File  $currentPage.File }} active{{ end }}" href="{{.Permalink}}">{{  partial "helper/page-title" . }}</a>
    {{- if .IsNode  }}  
    <nav>
        {{ template "builder" (dict "site" $site "root" $root "currentPage"  $currentPage "stufe" (add ($stufe) 1)  "item" . )  }}
    </nav>    
    {{ end -}}
{{ end }}

{{ end }}